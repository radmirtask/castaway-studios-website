---
import Layout from '../../layouts/Layout.astro';
import Timeline from '../../components/Timeline/Timeline.jsx';
import TimelineItem from '../../components/Timeline/TimelineItem.jsx';
import './about.css';

const timelineData = [
  {
    year: "2022",
    title: "Foundation",
    text: "Castaway Studios was founded in 2022 in Istanbul – not in a boardroom, but in a late-night call between two friends who shared a belief: Mobile games deserved more. Not just more content – but more care, more depth, and more design made for the device, not just on it. We didn't want to follow trends. We wanted to define what mobile-native gameplay should feel like – fast, fluid, intuitive, and emotionally rewarding. So we started building.\n\nWhat began as a small project quickly turned into a shared obsession: creating vertical RPGs that belong on mobile – not scaled down from somewhere else, but designed from the ground up for the way people actually play.",
    image: "/about/foundation.png",
    imageAlt: "Foundation of Castaway Studios - two founders working late at night"
  },
  {
    year: "2023",
    title: "Creating",
    text: "By 2023, we had released two games, tested multiple prototypes, and refined our design philosophy. We embraced mobile as a creative advantage – focusing on one-hand control, vertical orientation, and feedback that respects the player's time and attention.",
    image: "/about/creating.png",
    imageAlt: "Game development process showing mobile-first design principles"
  },
  {
    year: "2025",
    title: "Expanding",
    text: "In 2025, Castaway Studios expanded globally. We set up production in Toronto, bringing our vision to a new level. We assembled a lean, international team across Turkey, Canada, Ukraine, and Kazakhstan – developers, artists, and storytellers.",
    image: "/about/expanding.png",
    imageAlt: "Global expansion map showing team locations across multiple countries"
  },
  {
    year: "future",
    title: "Magnum Opus",
    text: "Now, we're building our biggest title yet: a vertical, action-RPG with console-level clarity – designed from scratch to deliver depth, polish, and replayability on the device players use most.",
    image: "/about/magnum_opus.png",
    imageAlt: "Preview of upcoming action-RPG game showing console-quality graphics"
  }
];

---

<Layout title="About Us — Castaway Studios">
  <main class="about">
      <!-- Hero -->
      <section class="hero-section">
        <div class="hero-content">
          <h1>READY<br />FOR ADVENTURE</h1>
        </div>
      </section>

      <!-- Company Info -->
      <section class="company-info">
        <div class="watermark">
          <img src="/about/Layer_2.svg" alt="" />
        </div>
        <div class="company-content">
          <img src="/global/logo.svg" alt="Castaway Studios" class="company-logo" />
          <p class="company-description">
            <span class="highlight">Made with love in Toronto.</span> Castaway Studios is a joint stock company (A.S.) founded in 2022 with a vision to revolutionize mobile gaming. We combine cutting-edge technology with creative storytelling to deliver immersive gaming experiences that push the boundaries of what's possible on mobile devices.
            <span class="highlight">Our mission is simple: to bring console-quality clarity to mobile-native play.</span>
          </p>
        </div>
      </section>

      <!-- Sliding Text Banner -->
      <section class="sliding-banner">
        <div class="sliding-text-container">
          <div class="sliding-text">
            READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • READY FOR ADVENTURE • 
          </div>
        </div>
      </section>

      <!-- Stats -->
      <section class="stats-section" aria-label="Company Stats">
        <div class="stats-bg"></div>
        <div class="stats-container">
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number">3+</div>
              <div class="stat-label">Games<br>in Development</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">5</div>
              <div class="stat-label">Team<br>Members</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">3</div>
              <div class="stat-label">Years<br>Experience</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">2</div>
              <div class="stat-label">Games<br>in Apple Store</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Our Story Timeline -->
    <Timeline client:load>
      <TimelineItem
        year="2022"
        title="FOUNDATION"
        text="Castaway Studios was founded in 2022 in Istanbul – not in a boardroom, but in a late-night call between two friends who shared a belief: Mobile games deserved more. Not just more content – but more care, more depth, and more design made for the device, not just on it. We didn't want to follow trends. We wanted to define what mobile-native gameplay should feel like – fast, fluid, intuitive, and emotionally rewarding. So we started building.\n\nWhat began as a small project quickly turned into a shared obsession: creating vertical RPGs that belong on mobile – not scaled down from somewhere else, but designed from the ground up for the way people actually play."
        image="/about/foundation.png"
        index={0}
      />
      <TimelineItem
        year="2023"
        title="CREATING"
        text="By 2023, we had released two games, tested multiple prototypes, and refined our design philosophy. We embraced mobile as a creative advantage – focusing on one-hand control, vertical orientation, and feedback that respects the player's time and attention."
        image="/about/creating.png"
        index={1}
      />
      <TimelineItem
        year="2025"
        title="EXPANDING"
        text="In 2025, Castaway Studios expanded globally. We set up production in Toronto, bringing our vision to a new level. We assembled a lean, international team across Turkey, Canada, Ukraine, and Kazakhstan – developers, artists, and storytellers."
        image="/about/expanding.png"
        index={2}
      />
      <TimelineItem
        year="2025"
        title="MAGNUM OPUS"
        text="Now, we're building our biggest title yet: a vertical, action-RPG with console-level clarity – designed from scratch to deliver depth, polish, and replayability on the device players use most."
        image="/about/magnum_opus.png"
        index={3}
      />
    </Timeline>


   <!-- CTA -->
   <section class="cta-section">
    <div class="cta-container">
      <h2 class="cta-title">Ready to Build What's Next?</h2>
      <a 
        href="/careers" 
        class="cta-button"
        aria-describedby="cta-description"
      >
        View Open Positions
      </a>
      <p id="cta-description" class="sr-only">
        Explore career opportunities at Castaway Studios
      </p>
    </div>
  </section>
</main>
</Layout>

<style>
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Check if device has touch capability
  const isTouchDevice = ('ontouchstart' in window) || 
                       (navigator.maxTouchPoints > 0) || 
                       (navigator.msMaxTouchPoints > 0);
  
  // Only add mouse interactions for non-touch devices
  if (!isTouchDevice) {
    const statItems = document.querySelectorAll('.stat-item') as NodeListOf<HTMLElement>;
    
    statItems.forEach(item => {
      item.addEventListener('mouseenter', function() {
        (this as HTMLElement).style.transition = 'transform 0.1s ease-out, background 0.4s ease, backdrop-filter 0.4s ease, border 0.4s ease, box-shadow 0.4s ease';
      });
      
      item.addEventListener('mouseleave', function() {
        (this as HTMLElement).style.transition = 'all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        (this as HTMLElement).style.transform = 'translateY(0) scale(1) rotateX(0deg) rotateY(0deg)';
      });
      
      item.addEventListener('mousemove', function(e: MouseEvent) {
        const element = this as HTMLElement;
        const rect = element.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        
        const rotateX = (y - centerY) / centerY * -12;
        const rotateY = (x - centerX) / centerX * 12;
        
        element.style.transform = `translateY(-8px) scale(1.02) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      });
    });
  }
  
  // Interactive Sliding Banner
  const slidingBanner = document.querySelector('.sliding-banner') as HTMLElement;
  const companyInfo = document.querySelector('.company-info') as HTMLElement;
  const statsSection = document.querySelector('.stats-section') as HTMLElement;
  
  if (slidingBanner && companyInfo && statsSection) {
    let bannerSystem = null;
    let hasBeenActivated = false;
    
    // Create intersection observer for initial trigger
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !hasBeenActivated) {
          // First time properly seeing the section - start banner system
          hasBeenActivated = true;
          startBannerCycle();
          // Stop observing once activated
          observer.disconnect();
        }
      });
    }, {
      threshold: 0.6, // User must see 60% of the section
      rootMargin: '0px 0px' // No early triggering
    });
    
    function startBannerCycle() {
      // Wait 5 seconds after user first sees the section, then activate banner
      setTimeout(() => {
        slidingBanner.classList.add('active');
        
        // Set up recurring cycle synchronized with text animation
        bannerSystem = setInterval(() => {
          // Close banner after text completes full cycle
          slidingBanner.classList.remove('active');
          
          // Long cooldown period (60 seconds), then reopen with fresh animation
          setTimeout(() => {
            // Reset animation by forcing reflow
            const slidingText = slidingBanner.querySelector('.sliding-text') as HTMLElement;
            if (slidingText) {
              slidingText.style.animation = 'none';
              slidingText.offsetHeight; // Force reflow
              slidingText.style.animation = 'slideText 30s linear infinite';
            }
            
            // Activate banner with fresh animation
            slidingBanner.classList.add('active');
          }, 60000);
          
        }, 90000); // Complete cycle: 30s open + 60s closed = 90s total
      }, 5000); // 5 second delay after first view
    }
    
    // Observe both company info and stats sections for initial trigger
    observer.observe(companyInfo);
    observer.observe(statsSection);
  }
});
</script>